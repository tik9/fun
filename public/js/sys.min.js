
sys()

function groupByKey(list, key) {
    return list.reduce((hash, { [key]: value, ...rest }) =>
        ({ ...hash, [value]: (hash[value] || []).concat({ ...rest }) }), {})
}

async function sys() {
    var jstab = []
    var sys = arguments.callee.name
    var res = JSON.parse(JSON.stringify(await getjson(), ['host', 'category', 'info', 'value']))
    res = groupByKey(res, 'host')
    // res = (res[Object.keys(res)[0]])
    // console.log(res)
    for (var key in res) {
        var arr = []
        for (var elem2 of res[key]) {
            var info = elem2.info
            var value = elem2.value
            var category = elem2.category
            arr.push({ category, info, value })
        }
        var head = document.createElement('h5')
        head.classList.add('mt-5')
        head.textContent = 'Host: ' + key

        var tab = table(arr, sys)
        jstab.push(tab)

        document.getElementById(sys).append(head, tab)
    }

    for (elem of jstab) { new JSTable(elem, { perPage: 5 }) }
}